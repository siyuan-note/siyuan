## 概述

此版本支持了数据库按字段分组并改进了大量细节。

请注意：

* 旧版本无法打开新版本的数据库，如果你使用的移动端是在商店安装的，建议等商店上架新版本后再更新桌面端
* 数据库模板的多选字段值从字符串变更为字符串数组，请参考[这里](https://github.com/siyuan-note/siyuan/issues/15575#issuecomment-3210963948)进行适配

## 变更记录

以下是此版本中的详细变更。

### 引入特性

* [数据库按字段分组](https://github.com/siyuan-note/siyuan/issues/10964)

### 改进功能

* [改进“添加到数据库”](https://github.com/siyuan-note/siyuan/issues/10659)
* [改进数据库字段默认填充](https://github.com/siyuan-note/siyuan/issues/11966)
* [数据库汇总字段支持使用模板字段](https://github.com/siyuan-note/siyuan/issues/12384)
* [闪卡为文档时显示标题](https://github.com/siyuan-note/siyuan/issues/14201)
* [改进数据库块绑定](https://github.com/siyuan-note/siyuan/issues/14511)
* [改进导出预览模式 CSS 变量值填充](https://github.com/siyuan-note/siyuan/pull/15110)
* [卡片视图支持显示字段名](https://github.com/siyuan-note/siyuan/issues/15180)
* [改进文档标题回车处理](https://github.com/siyuan-note/siyuan/issues/15294)
* [提升大量内容粘贴性能](https://github.com/siyuan-note/siyuan/issues/15306)
* [改进自定义代码块行号显示](https://github.com/siyuan-note/siyuan/pull/15324)
* [改进数据同步，避免因折叠块导致的冲突](https://github.com/siyuan-note/siyuan/issues/15329)
* [删除块时在某些情况下不再在文档开头添加空块](https://github.com/siyuan-note/siyuan/issues/15336)
* [改进模板搜索高亮](https://github.com/siyuan-note/siyuan/issues/15338)
* [导出预览模式支持聚焦使用](https://github.com/siyuan-note/siyuan/issues/15340)
* [导出预览时代码块保留属性](https://github.com/siyuan-note/siyuan/issues/15343)
* [支持代码块高亮模板语法并将代码块模板导出为段落](https://github.com/siyuan-note/siyuan/pull/15345)
* [“重新 OCR”在 Tesseract 未启用时弹窗提示](https://github.com/siyuan-note/siyuan/issues/15367)
* [改进 `<br>` 输入解析](https://github.com/siyuan-note/siyuan/issues/15373)
* [更新 highlight.js 插件](https://github.com/siyuan-note/siyuan/pull/15386)
* [改进卡片视图显示](https://github.com/siyuan-note/siyuan/issues/15389)
* [改进状态栏索引创建信息提示](https://github.com/siyuan-note/siyuan/issues/15390)
* [改进标签中表情符号的搜索](https://github.com/siyuan-note/siyuan/issues/15391)
* [文档支持复制为 Markdown](https://github.com/siyuan-note/siyuan/pull/15397)
* [数据库汇总字段支持复制为副本](https://github.com/siyuan-note/siyuan/issues/15417)
* [改进 HTML 剪藏](https://github.com/siyuan-note/siyuan/issues/15438)
* [当 .sy 文件或数据库 .json 超过 8MB 时提醒用户](https://github.com/siyuan-note/siyuan/issues/15451)
* [限制数据库标题为 512 个字符](https://github.com/siyuan-note/siyuan/issues/15459)
* [“上传资源文件到云端”支持聚焦使用](https://github.com/siyuan-note/siyuan/issues/15462)
* [改进导出 PDF 样式](https://github.com/siyuan-note/siyuan/pull/15463)
* [粘贴时解析 `<img>` 标签](https://github.com/siyuan-note/siyuan/issues/15464)
* [数据库模板字段支持使用其他模板字段](https://github.com/siyuan-note/siyuan/issues/15517)
* [改进数据库“垂直拖动填充值”](https://github.com/siyuan-note/siyuan/issues/15518)
* [标签页切换改进](https://github.com/siyuan-note/siyuan/issues/15546)
* [浏览数据库表当前视图图片时过滤隐藏列](https://github.com/siyuan-note/siyuan/pull/15548)
* [数据库拖拽、性能与交互优化](https://github.com/siyuan-note/siyuan/issues/15552)
* [数据库筛选条件未进行筛选计算时移除高亮](https://github.com/siyuan-note/siyuan/issues/15558)
* [改进数据库模板字段使用多选字段](https://github.com/siyuan-note/siyuan/issues/15575)
* [改进导入时 `<img>` 标签解析](https://github.com/siyuan-note/siyuan/issues/15638)
* [数据库汇总字段支持使用更新时间/创建时间字段](https://github.com/siyuan-note/siyuan/issues/15662)
* [手动优化数据索引以减少空间占用并提升性能](https://github.com/siyuan-note/siyuan/issues/15663)
* [改进数据库属性面板](https://github.com/siyuan-note/siyuan/issues/15664)
* [退出折叠块时改进聚焦定位](https://github.com/siyuan-note/siyuan/issues/15670)

### 修复缺陷

* [数据库选择字段若添加选项过快会丢失选项](https://github.com/siyuan-note/siyuan/issues/13261)
* [取消超级块时行内公式未渲染](https://github.com/siyuan-note/siyuan/issues/15341)
* [从资源文件夹拖动文件到编辑器导致内核退出](https://github.com/siyuan-note/siyuan/issues/15355)
* [新窗口锁定后再进入会重复生成托盘](https://github.com/siyuan-note/siyuan/issues/15357)
* [查找替换会错误地将标签转换为文本](https://github.com/siyuan-note/siyuan/issues/15372)
* [浮窗中将列表转为段落块后插入位置错误](https://github.com/siyuan-note/siyuan/issues/15396)
* [公式相关编辑器状态异常](https://github.com/siyuan-note/siyuan/issues/15554)
* [数据库汇总字段筛选结果不正确](https://github.com/siyuan-note/siyuan/issues/15608)

### 开发重构

* [升级至 Electron v37.3.1](https://github.com/siyuan-note/siyuan/issues/15410)

### 开发者

* [新增插件函数 `IProtyleOptions.handleEmptyContent`](https://github.com/siyuan-note/siyuan/issues/15398)
* [新增插件函数 `getActiveTab`](https://github.com/siyuan-note/siyuan/issues/15415)
* [内核 API `exportMdContent` 和 `copyStdMarkdown` 新增参数 `imgTag`](https://github.com/siyuan-note/siyuan/issues/15454)
* [将 `addTopBar` 和 `addStatusBar` 从 `onload` 生命周期调整到 `onLayoutReady`](https://github.com/siyuan-note/siyuan/issues/15455)
* [新增插件函数 `hideMessage`](https://github.com/siyuan-note/siyuan/issues/15485)
* [新增插件事件总线 `switch-protyle-mode`](https://github.com/siyuan-note/siyuan/issues/15516)
* [`/api/block/getBlockKramdown` 链接/图片 URL 不再用空格编码](https://github.com/siyuan-note/siyuan/issues/15611)
* [改进内核 API `/api/filetree/moveDocsByID`](https://github.com/siyuan-note/siyuan/issues/15616)
* [新增插件函数 `getActiveEditor`](https://github.com/siyuan-note/siyuan/issues/15641)

## 下载

* [B3log](https://b3log.org/siyuan/download.html)
* [GitHub](https://github.com/siyuan-note/siyuan/releases)
